
﻿(function(fireworks){fireworks.Firework=Firework;function Firework(startX,startY,targetX,targetY){this.x=startX;this.y=startY;this.startX=startX;this.startY=startY;this.targetX=targetX;this.targetY=targetY;this.distanceToTarget=fireworks.calculateDistance(startX,startY,targetX,targetY);this.distanceTraveled=0;this.coordinates=[];this.coordinateCount=fireworks.options.fireworkTrailLength;while(this.coordinateCount--){this.coordinates.push([this.x,this.y])}
this.angle=Math.atan2(targetY-startY,targetX-startX)
this.speed=fireworks.options.fireworkSpeed;this.acceleration=fireworks.options.fireworkAcceleration;this.brightness=fireworks.random(fireworks.options.fireworkBrightnessRange[0],fireworks.options.fireworkBrightnessRange[1]);this.targetRadius=1;}
Firework.prototype.update=function(index){this.coordinates.pop();this.coordinates.unshift([this.x,this.y])
if(this.targetRadius<fireworks.options.fireworkTargetRadius){this.targetRadius+=0.3;}else{this.targetRadius=1;}
this.speed*=this.acceleration;var velocityX=Math.cos(this.angle)*this.speed;var velocityY=Math.sin(this.angle)*this.speed;this.distanceTraveled=fireworks.calculateDistance(this.startX,this.startY,this.x+velocityX,this.y+velocityY);if(this.distanceTraveled>this.distanceToTarget){fireworks.createParticles(this.targetX,this.targetY);fireworks.fireworks.splice(index,1);}else{this.x+=velocityX;this.y+=velocityY;}}
Firework.prototype.draw=function(){fireworks.ctx.beginPath();fireworks.ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]);fireworks.ctx.lineTo(this.x,this.y);fireworks.ctx.strokeStyle='hsl('+fireworks.options.hue+',100%,'+this.brightness+'%)';fireworks.ctx.lineWidth=fireworks.options.ctxLineWidth;fireworks.ctx.stroke();fireworks.ctx.beginPath();fireworks.ctx.arc(this.targetX,this.targetY,this.targetRadius,0,360*Math.PI/180);fireworks.ctx.stroke();}})(window.Fireworks=window.Fireworks||{});﻿(function(fw){fw.greeting=greeting;function greeting(){var textInput=document.getElementById('heading').value;var wishes=document.getElementById('wishes').value;var wishesColor="#d1fe01";var svgNameSpace='http://www.w3.org/2000/svg';var svg=document.getElementById('the-svg');svg.innerHTML="";var textFont="Verdana";var textRowWidth=10;var textFontSize=34;var update=2;var textSpeed=30;var animationCounter=100;var MAX_FONT_SIZE=72;var MIN_FONT_SIZE=32;var text;function createMultilineText(output,inputText,rowWidth){var words=inputText.split(' ');var newTSElement=document.createElementNS(svgNameSpace,"tspan");var textNode=document.createTextNode(words[0]);var tSpanElement=newTSElement;var word;var outputPositionX=output.getAttribute('x');var outputPositionY=output.getAttribute('y');tSpanElement.appendChild(textNode);output.appendChild(tSpanElement);while(words.length>0){word=words.shift();textNode=document.createTextNode(word+" ");if(tSpanElement.innerHTML.length+word.length>rowWidth){output.appendChild(tSpanElement);tSpanElement=newTSElement.cloneNode(true);}
tSpanElement.appendChild(textNode);}}
function drawText(coordinateX,coordinateY,input,fill,fontSize,fontWeight,fontFamily,stroke,sWidth){var text,strokeColor=stroke||'black',strokeWidth=sWidth||3;text=document.createElementNS(svgNameSpace,'text');text.innerHTML=input;text.setAttribute('x',coordinateX);text.setAttribute('y',coordinateY);text.setAttribute('fill',fill);text.setAttribute('font-size',fontSize);text.setAttribute('font-weight',fontWeight);text.setAttribute('font-family',fontFamily);text.setAttribute('stroke',strokeColor);text.setAttribute('stroke-width',strokeWidth);return text;}
var greetings=drawText(250-textFontSize,200,wishes,wishesColor,textFontSize,"bold","Verdana");svg.appendChild(greetings);text=drawText(250-textFontSize,100,textInput,"#aaaf18",textFontSize,"bold",textFont);svg.appendChild(text);function updateText(){if(animationCounter>0){if(update>0){if(textFontSize<MAX_FONT_SIZE){textFontSize+=update;}
else{update=-update;}}
else{if(textFontSize>MIN_FONT_SIZE){textFontSize+=update;}
else{update=-update;}}
animationCounter--;text.setAttribute("fill",getRandomColor());text.setAttribute('x',250-(textFontSize));text.setAttribute('font-size',textFontSize);}
else{text.innerHTML="";greetings.innerHTML="";}}
setInterval(function(){updateText();},textSpeed);}
function getRandomColor(){var red=Math.floor(Math.random()*256),green=Math.floor(Math.random()*256),blue=Math.floor(Math.random()*256);return'rgb('+red+','+green+','+blue+')';}})(window.Fireworks=window.Fireworks||{});﻿(function(fireworks,window){window.requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();fireworks.canvas=document.createElement("canvas");fireworks.canvas.id="fireworks-field";setPositionAndAppendToDocument(fireworks.canvas);fireworks.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");fireworks.svg.id="the-svg";setPositionAndAppendToDocument(fireworks.svg);fireworks.ctx=fireworks.canvas.getContext('2d');setWidthAndHeight();fireworks.options=new fireworks.Options();fireworks.fireworks=[];fireworks.particles=[];fireworks.random=function random(min,max){return Math.random()*(max-min)+min;};fireworks.calculateDistance=function calculateDistance(point1X,point1Y,point2X,point2Y){var distanceX=point1X-point2X;var distanceY=point1Y-point2Y;return Math.sqrt(Math.pow(distanceX,2)+Math.pow(distanceY,2))}
fireworks.createParticles=function createParticles(x,y){var particleCount=fireworks.options.particleCount;while(particleCount--){fireworks.particles.push(new fireworks.Particle(x,y))}}
var limiterTick=fireworks.options.limiterTick;var timerTick=fireworks.options.timerTick;var mouseX;var mouseY;var mousedown=false;fireworks.init=function loop(options){if(options!=null){fireworks.options=new fireworks.Options(options);}
window.requestAnimationFrame(loop.bind(null,null));fireworks.options.hue+=fireworks.options.hueStep;fireworks.ctx.globalCompositeOperation='destination-out';fireworks.ctx.fillStyle=fireworks.options.ctxFillStyle;fireworks.ctx.fillRect(0,0,fireworks.canvasWidth,fireworks.canvasHeight);fireworks.ctx.globalCompositeOperation='lighter'
var fireworkIndex=fireworks.fireworks.length;while(fireworkIndex--){fireworks.fireworks[fireworkIndex].draw();fireworks.fireworks[fireworkIndex].update(fireworkIndex);}
var particleIndex=fireworks.particles.length;while(particleIndex--){fireworks.particles[particleIndex].draw();fireworks.particles[particleIndex].update(particleIndex);}
if(timerTick>=fireworks.options.timerTotal){if(!mousedown){fireworks.fireworks.push(new fireworks.Firework(fireworks.canvasWidth/2,fireworks.canvasHeight,fireworks.random(0,fireworks.canvasWidth),fireworks.random(0,fireworks.canvasHeight/2)));timerTick=fireworks.options.timerTick;}}else{timerTick++;}
if(limiterTick>=fireworks.options.limiterTotal){if(mousedown){fireworks.fireworks.push(new fireworks.Firework(fireworks.canvasWidth/2,fireworks.canvasHeight,mouseX,mouseY));limiterTick=fireworks.options.fireworks.options.limiterTick;}}else{limiterTick++;}}
fireworks.canvas.addEventListener('mousemove',function(e){mouseX=e.pageX-fireworks.canvas.offsetLeft;mouseY=e.pageY-fireworks.canvas.offsetTop;});fireworks.canvas.addEventListener('mousedown',function(e){e.preventDefault();mousedown=true;});fireworks.canvas.addEventListener('mouseup',function(e){e.preventDefault();mousedown=false;});window.onresize=function(){setWidthAndHeight();};function setWidthAndHeight(){var docElement=window.document.documentElement,body=window.document.getElementsByTagName('body')[0],width=window.innerWidth||docElement.clientWidth||body.clientWidth,height=window.innerHeight||docElement.clientHeight||body.clientHeight;if(fireworks.options!==undefined){fireworks.options.width=width;fireworks.options.height=height;}
fireworks.canvas.width=width;fireworks.canvas.height=height;fireworks.svg.style.width=width;fireworks.svg.style.height=height;fireworks.canvasWidth=width;fireworks.canvasHeight=height;}
function setPositionAndAppendToDocument(element){element.style.position="fixed";element.style.top=0;element.style.left=0;element.style.zIndex=100000;element.style.pointerEvents="none";window.document.body.appendChild(element);}})(window.Fireworks=window.Fireworks||{},window);﻿(function(fireworks){fireworks.Options=Options;function Options(options){if(options===undefined){options={};}
if(options.width!==undefined){if(options.width<0){options.width=fireworks.canvasWidth+options.width+20;}
this.width=options.width;fireworks.canvasWidth=options.width;fireworks.canvas.width=options.width;fireworks.svg.style.width=options.width;}
if(options.height!==undefined){if(options.height<0){options.height=fireworks.canvasHeight+options.height;}
this.height=options.height;fireworks.canvasHeight=options.height;fireworks.canvas.height=options.height;fireworks.svg.style.height=options.height;}
this.limiterTotal=options.limiterTotal||5;this.limiterTick=options.limiterTick||0;this.timerTotal=options.timerTotal||70;this.timerTick=options.timerTick||0;this.hue=options.hue||180;this.hueStep=options.hueStep||0.5;this.ctxFillStyle=options.ctxFillStyle||'rgba(0,0,0,0.4)';this.ctxLineWidth=options.lineWidth||2;this.fireworkTrailLength=options.fireworkTrailLength||3;this.fireworkSpeed=options.fireworkSpeed||2;this.fireworkAcceleration=options.fireworkAcceleration||1.05;this.fireworkBrightnessRange=options.fireworkBrightnessRange||[50,80];this.fireworkTargetRadius=options.fireworkTargetRadius||5;this.particleTrailLength=options.particleTrailLength||5;this.particleCount=options.particleCount||30;this.particleSpeedRange=options.particleSpeedRange||[1,10];this.particleFriction=options.particleFriction||0.95;this.particleGravity=options.particleGravity||1;this.particleHueRange=options.particleHueRange||[15,15];this.particleBrightnessRange=options.particleBrightnessRange||[50,80];this.particleAlpha=options.particleAlpha||1;this.particleDecayRange=options.particleDecayRange||[0.015,0.03];}})(window.Fireworks=window.Fireworks||{});﻿(function(fireworks){fireworks.Particle=Particle;function Particle(x,y){this.x=x;this.y=y;this.coordinates=[];this.coordinateCount=fireworks.options.particleTrailLength;while(this.coordinateCount--){this.coordinates.push([this.x,this.y])}
this.angle=fireworks.random(0,360*Math.PI/180);this.speed=fireworks.random(fireworks.options.particleSpeedRange[0],fireworks.options.particleSpeedRange[1]);this.friction=fireworks.options.particleFriction;this.gravity=fireworks.options.particleGravity;this.hue=fireworks.random(fireworks.options.hue-fireworks.options.particleHueRange[0],fireworks.options.hue+fireworks.options.particleHueRange[1])
this.brightness=fireworks.random(fireworks.options.particleBrightnessRange[0],fireworks.options.particleBrightnessRange[1]);this.alpha=fireworks.options.particleAlpha;this.decay=fireworks.random(fireworks.options.particleDecayRange[0],fireworks.options.particleDecayRange[1]);}
Particle.prototype.update=function(index){this.coordinates.pop();this.coordinates.unshift([this.x,this.y]);this.speed*=this.friction;this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed+this.gravity;this.alpha-=this.decay;if(this.alpha<=this.decay){fireworks.particles.splice(index,1);}}
Particle.prototype.draw=function(){fireworks.ctx.beginPath();fireworks.ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]);fireworks.ctx.lineTo(this.x,this.y);fireworks.ctx.strokeStyle='hsla('+this.hue+', 100%, '+this.brightness+'%, '+this.alpha+')';fireworks.ctx.stroke();}})(window.Fireworks=window.Fireworks||{});