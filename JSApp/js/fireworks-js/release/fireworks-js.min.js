
﻿(function(fw){fw.Firework=Firework;function Firework(sx,sy,tx,ty){this.x=sx;this.y=sy;this.sx=sx;this.sy=sy;this.tx=tx;this.ty=ty;this.distanceToTarget=fw.calculateDistance(sx,sy,tx,ty);this.distanceTraveled=0;this.coordinates=[];this.coordinateCount=3;while(this.coordinateCount--){this.coordinates.push([this.x,this.y])}
this.angle=Math.atan2(ty-sy,tx-sx)
this.speed=2;this.acceleration=1.05;this.brightness=fw.random(50,80);this.targetRadius=1;}
Firework.prototype.update=function(index){this.coordinates.pop();this.coordinates.unshift([this.x,this.y])
if(this.targetRadius<5){this.targetRadius+=0.3;}else{this.targetRadius=1;}
this.speed*=this.acceleration;var vx=Math.cos(this.angle)*this.speed;var vy=Math.sin(this.angle)*this.speed;this.distanceTraveled=fw.calculateDistance(this.sx,this.sy,this.x+vx,this.y+vy);if(this.distanceTraveled>this.distanceToTarget){fw.createParticles(this.tx,this.ty);fw.fireworks.splice(index,1);}else{this.x+=vx;this.y+=vy;}}
Firework.prototype.draw=function(){fw.ctx.beginPath();fw.ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]);fw.ctx.lineTo(this.x,this.y);fw.ctx.strokeStyle='hsl('+fw.hue+',100%,'+this.brightness+'%)';fw.ctx.stroke();fw.ctx.beginPath();fw.ctx.arc(this.tx,this.ty,this.targetRadius,0,360*Math.PI/180);fw.ctx.stroke();}})(window.Fireworks=window.Fireworks||{});﻿(function(fw,window){window.requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();(function setWidthHeight(){var docElement=window.document.documentElement,body=window.document.getElementsByTagName('body')[0],width=window.innerWidth||docElement.clientWidth||body.clientWidth,height=window.innerHeight||docElement.clientHeight||body.clientHeight;fw.canvas=document.createElement("canvas");fw.canvas.id="fireworks-field";fw.canvas.style.position="fixed";fw.canvas.style.top=0;fw.canvas.style.left=0;fw.canvas.style.bottom=0;fw.canvas.style.right=0;fw.canvas.style.pointerEevents="none";window.document.body.appendChild(fw.canvas);fw.canvas.width=width;fw.canvas.height=height;})();fw.ctx=fw.canvas.getContext('2d');fw.cw=fw.canvas.clientWidth;fw.ch=fw.canvas.clientHeight;fw.fireworks=[];fw.particles=[];fw.hue=180;fw.random=function random(min,max){return Math.random()*(max-min)+min;};fw.calculateDistance=function calculateDistance(p1x,p1y,p2x,p2y){var xD=p1x-p2x;var yD=p1y-p2y;return Math.sqrt(Math.pow(xD,2)+Math.pow(yD,2))}
fw.createParticles=function createParticles(x,y){var particleCount=30;while(particleCount--){fw.particles.push(new fw.Particle(x,y))}}
var limiterTotal=5;var limiterTick=0;var timerTotal=100;var timerTick=0;var mx;var my;var mousedown=false;fw.init=function loop(){window.requestAnimationFrame(loop);fw.hue+=0.5;fw.ctx.globalCompositeOperation='destination-out';fw.ctx.fillStyle='rgba(0,0,0,0.4)';fw.ctx.fillRect(0,0,fw.cw,fw.ch);fw.ctx.globalCompositeOperation='lighter'
var fireworkIndex=fw.fireworks.length;while(fireworkIndex--){fw.fireworks[fireworkIndex].draw();fw.fireworks[fireworkIndex].update(fireworkIndex);}
var particleIndex=fw.particles.length;while(particleIndex--){fw.particles[particleIndex].draw();fw.particles[particleIndex].update(particleIndex);}
if(timerTick>=timerTotal){if(!mousedown){fw.fireworks.push(new fw.Firework(fw.cw/2,fw.ch,fw.random(0,fw.cw),fw.random(0,fw.ch/2)));timerTick=0;}}else{timerTick++;}
if(limiterTick>=limiterTotal){if(mousedown){fw.fireworks.push(new fw.Firework(fw.cw/2,fw.ch,mx,my));limiterTick=0;}}else{limiterTick++;}}
fw.canvas.addEventListener('mousemove',function(e){mx=e.pageX-fw.canvas.offsetLeft;my=e.pageY-fw.canvas.offsetTop;});fw.canvas.addEventListener('mousedown',function(e){e.preventDefault();mousedown=true;});fw.canvas.addEventListener('mouseup',function(e){e.preventDefault();mousedown=false;});})(window.Fireworks=window.Fireworks||{},window);﻿(function(fw){fw.Particle=Particle;function Particle(x,y){this.x=x;this.y=y;this.coordinates=[];this.coordinateCount=5;while(this.coordinateCount--){this.coordinates.push([this.x,this.y])}
this.angle=fw.random(0,360*Math.PI/180);this.speed=fw.random(1,10);this.friction=0.95;this.gravity=1;this.hue=fw.random(fw.hue-15,fw.hue+15)
this.brightness=fw.random(50,80);this.alpha=1;this.decay=fw.random(0.015,0.03);}
Particle.prototype.update=function(index){this.coordinates.pop();this.coordinates.unshift([this.x,this.y]);this.speed*=this.friction;this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed+this.gravity;this.alpha-=this.decay;if(this.alpha<=this.decay){fw.particles.splice(index,1);}}
Particle.prototype.draw=function(){fw.ctx.beginPath();fw.ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]);fw.ctx.lineTo(this.x,this.y);fw.ctx.strokeStyle='hsla('+this.hue+', 100%, '+this.brightness+'%, '+this.alpha+')';fw.ctx.stroke();}})(window.Fireworks=window.Fireworks||{});